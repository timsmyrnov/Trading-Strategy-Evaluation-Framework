import matplotlib.pyplot as plt
import pandas as pd
from io import StringIO

aapl_data = """
2024-06-03,AAPL,192.0,194.08,191.62,193.13,50080500.0
2024-06-04,AAPL,193.73,194.41,192.13,193.45,47471400.0
2024-06-05,AAPL,194.49,195.98,193.96,194.96,54156800.0
2024-06-06,AAPL,194.78,195.59,193.27,193.57,41181800.0
2024-06-07,AAPL,193.74,196.02,193.24,195.97,53103900.0
2024-06-10,AAPL,195.98,196.38,191.26,192.22,97262100.0
2024-06-11,AAPL,192.75,206.2,192.73,206.19,172373300.0
2024-06-12,AAPL,206.4,219.17,205.94,212.08,198134300.0
2024-06-13,AAPL,213.74,215.74,210.62,213.24,97862700.0
2024-06-14,AAPL,212.85,214.17,210.32,211.5,70122700.0
2024-06-17,AAPL,212.38,217.93,211.73,215.66,93728300.0
2024-06-18,AAPL,216.58,217.61,212.01,213.29,79943300.0
2024-06-20,AAPL,212.93,213.24,207.88,208.7,86172500.0
2024-06-21,AAPL,209.41,210.9,206.15,206.52,246421400.0
2024-06-24,AAPL,206.75,211.71,205.63,207.17,80727000.0
2024-06-25,AAPL,208.18,210.4,207.64,208.1,56713900.0
2024-06-26,AAPL,210.52,213.86,209.66,212.26,66213200.0
2024-06-27,AAPL,213.69,214.74,211.36,213.1,49772700.0
2024-06-28,AAPL,214.77,215.06,209.32,209.64,82542700.0
2024-07-01,AAPL,211.1,216.5,210.93,215.74,60402900.0
2024-07-02,AAPL,215.14,219.35,214.1,219.24,58046200.0
2024-07-03,AAPL,218.98,220.52,218.01,220.52,37369800.0
2024-07-05,AAPL,220.62,225.4,220.62,225.29,60412400.0
2024-07-08,AAPL,226.03,226.79,222.21,226.76,59085900.0
2024-07-09,AAPL,226.87,228.33,225.32,227.62,48076100.0
2024-07-10,AAPL,228.23,232.0,228.18,231.9,62627700.0
2024-07-11,AAPL,230.31,231.31,224.72,226.51,64710600.0
2024-07-12,AAPL,227.85,231.56,227.62,229.47,53046500.0
2024-07-15,AAPL,235.38,236.13,232.0,233.31,62631300.0
2024-07-16,AAPL,233.91,235.17,231.25,233.73,43234300.0
2024-07-17,AAPL,228.38,230.38,225.59,227.81,57345900.0
2024-07-18,AAPL,229.21,229.37,221.24,223.14,66034600.0
2024-07-19,AAPL,223.77,225.74,222.24,223.27,49151500.0
2024-07-22,AAPL,225.95,226.72,222.05,222.92,48201800.0
2024-07-23,AAPL,223.33,225.88,221.64,223.96,39960300.0
2024-07-24,AAPL,222.96,223.75,216.12,217.52,61777600.0
2024-07-25,AAPL,217.91,219.82,213.62,216.48,51391200.0
2024-07-26,AAPL,217.68,218.47,215.0,216.95,41601300.0
2024-07-29,AAPL,215.95,218.28,214.75,217.22,36311800.0
2024-07-30,AAPL,218.17,219.3,215.11,217.78,41643800.0
2024-07-31,AAPL,220.41,222.78,219.6,221.05,50036300.0
2024-08-01,AAPL,223.33,223.44,216.01,217.34,62501000.0
2024-08-02,AAPL,218.13,224.55,216.7,218.84,105568600.0
2024-08-05,AAPL,198.16,212.51,195.09,208.3,119548600.0
2024-08-06,AAPL,204.34,209.01,200.13,206.27,69660500.0
2024-08-07,AAPL,205.94,212.65,205.43,208.84,63516400.0
2024-08-08,AAPL,212.12,213.2,207.86,212.32,47161100.0
2024-08-09,AAPL,211.11,215.77,210.98,215.23,42201600.0
2024-08-12,AAPL,215.31,218.74,214.84,216.77,38028100.0
2024-08-13,AAPL,218.24,221.11,218.24,220.49,44155300.0
2024-08-14,AAPL,219.8,222.25,218.93,220.94,41960600.0
2024-08-15,AAPL,223.81,224.56,221.98,223.93,46414000.0
2024-08-16,AAPL,223.14,226.04,222.87,225.26,44340200.0
2024-08-19,AAPL,224.93,225.2,222.26,225.1,40687800.0
2024-08-20,AAPL,224.98,226.37,224.66,225.72,30299000.0
2024-08-21,AAPL,225.73,227.18,224.26,225.61,34765500.0
2024-08-22,AAPL,226.99,227.54,223.12,223.74,43695300.0
2024-08-23,AAPL,224.87,227.42,223.54,226.05,38677300.0
2024-08-26,AAPL,225.97,226.48,223.11,226.38,30602200.0
2024-08-27,AAPL,225.21,228.05,224.1,227.23,35934600.0
2024-08-28,AAPL,227.12,229.05,224.89,225.7,38052200.0
2024-08-29,AAPL,229.29,232.1,228.08,228.99,51906300.0
2024-08-30,AAPL,229.38,229.59,226.68,228.2,52990800.0
2024-09-03,AAPL,227.75,228.2,220.4,221.99,50190600.0
2024-09-04,AAPL,220.88,221.0,216.72,220.08,43840200.0
2024-09-05,AAPL,220.85,224.69,220.74,221.6,36615400.0
2024-09-06,AAPL,223.17,224.45,219.0,220.05,48423000.0
2024-09-09,AAPL,220.05,220.49,215.95,220.14,67180000.0
2024-09-10,AAPL,218.15,220.7,215.97,219.34,51591000.0
2024-09-11,AAPL,220.68,222.31,217.13,221.88,44587100.0
2024-09-12,AAPL,221.72,222.77,219.05,221.99,37498200.0
2024-09-13,AAPL,222.8,223.26,221.13,221.72,36766600.0
2024-09-16,AAPL,215.78,216.46,213.17,215.56,59357400.0
2024-09-17,AAPL,214.99,216.14,213.75,216.03,45519300.0
2024-09-18,AAPL,216.79,221.93,216.78,219.92,59894900.0
2024-09-19,AAPL,224.2,229.01,223.84,228.07,66781300.0
2024-09-20,AAPL,229.16,232.27,226.82,227.4,318679900.0
2024-09-23,AAPL,226.54,228.65,225.02,225.68,54146000.0
2024-09-24,AAPL,227.85,228.55,224.94,226.57,43556100.0
2024-09-25,AAPL,224.14,226.49,223.24,225.58,42308700.0
2024-09-26,AAPL,226.5,227.7,224.62,226.72,36636700.0
2024-09-27,AAPL,227.66,228.72,226.5,226.99,34026000.0
2024-09-30,AAPL,229.23,232.18,228.85,232.18,54541900.0
2024-10-01,AAPL,228.72,228.85,222.96,225.42,63285000.0
2024-10-02,AAPL,225.1,226.57,222.24,225.99,32880600.0
2024-10-03,AAPL,224.35,226.02,222.54,224.88,34044200.0
2024-10-04,AAPL,227.1,227.2,223.34,226.01,37245100.0
2024-10-07,AAPL,223.71,224.9,220.55,220.91,39505400.0
2024-10-08,AAPL,223.51,225.19,222.47,224.98,31855700.0
2024-10-09,AAPL,224.44,228.95,224.04,228.74,33591100.0
2024-10-10,AAPL,226.98,228.7,226.37,228.24,28183500.0
2024-10-11,AAPL,228.5,228.61,226.54,226.75,31759200.0
2024-10-14,AAPL,227.9,230.92,227.8,230.49,39882100.0
2024-10-15,AAPL,232.79,236.66,231.56,233.03,64751400.0
2024-10-16,AAPL,230.79,231.31,229.03,230.97,34082200.0
2024-10-17,AAPL,232.61,233.03,229.71,231.34,32993800.0
2024-10-18,AAPL,235.35,235.35,233.19,234.18,46431500.0
2024-10-21,AAPL,233.63,236.02,233.63,235.65,36254500.0
2024-10-22,AAPL,233.07,235.39,231.79,235.03,38846600.0
2024-10-23,AAPL,233.26,234.32,226.96,229.95,52287000.0
2024-10-24,AAPL,229.17,230.01,227.61,229.76,31109500.0
2024-10-25,AAPL,228.94,232.4,228.77,230.6,38802300.0
2024-10-28,AAPL,232.5,233.91,231.74,232.58,36087100.0
2024-10-29,AAPL,232.28,233.51,231.51,232.85,35417200.0
2024-10-30,AAPL,231.8,232.65,228.75,229.29,47070900.0
2024-10-31,AAPL,228.54,229.02,224.58,225.12,64370100.0
2024-11-01,AAPL,220.2,224.56,219.5,222.13,65276700.0
2024-11-04,AAPL,220.22,222.01,218.94,221.23,44944500.0
2024-11-05,AAPL,221.02,223.17,220.37,222.67,28111300.0
2024-11-06,AAPL,221.83,225.28,220.42,221.94,54561100.0
2024-11-07,AAPL,223.84,227.08,223.78,226.68,42137700.0
2024-11-08,AAPL,226.62,228.11,225.87,226.41,38328800.0
2024-11-11,AAPL,224.46,225.16,220.97,223.69,42005600.0
2024-11-12,AAPL,224.01,225.05,222.82,223.69,40398300.0
2024-11-13,AAPL,223.47,226.1,222.22,224.58,48566200.0
2024-11-14,AAPL,224.48,228.32,224.46,227.67,44923900.0
2024-11-15,AAPL,225.86,226.37,223.73,224.46,47923700.0
2024-11-18,AAPL,224.71,229.19,224.63,227.47,44686000.0
2024-11-19,AAPL,226.43,229.61,226.11,227.73,36211800.0
2024-11-20,AAPL,227.51,229.38,225.35,228.45,35169600.0
2024-11-21,AAPL,228.33,229.61,225.17,227.97,42108300.0
2024-11-22,AAPL,227.51,230.16,227.51,229.32,38168300.0
2024-11-25,AAPL,230.9,232.69,229.19,232.31,90152800.0
2024-11-26,AAPL,232.77,235.0,232.77,234.49,45986200.0
2024-11-27,AAPL,233.91,235.12,233.25,234.36,33498400.0
2024-11-29,AAPL,234.24,237.24,233.41,236.76,28481400.0
2024-12-02,AAPL,236.7,240.21,236.59,239.01,48137100.0
2024-12-03,AAPL,239.23,242.18,238.33,242.07,38861000.0
2024-12-04,AAPL,242.29,243.52,240.67,242.43,44383900.0
2024-12-05,AAPL,243.4,243.95,241.55,242.46,40033900.0
2024-12-06,AAPL,242.33,244.04,241.5,242.26,36870600.0
2024-12-09,AAPL,241.25,246.65,241.17,246.16,44649200.0
2024-12-10,AAPL,246.3,247.61,244.75,247.17,36914800.0
2024-12-11,AAPL,247.36,250.2,245.67,245.9,45205800.0
2024-12-12,AAPL,246.3,248.14,245.09,247.36,32777500.0
"""

df = pd.read_csv(StringIO(aapl_data), header=None,
                 names=["Date", "Symbol", "Open", "High", "Low", "Close", "Volume"])
df["Date"] = pd.to_datetime(df["Date"])

close_prices = df["Close"].tolist()
dates = df["Date"].tolist()

custom_sma = [176.19, 176.64, 177.08, 177.59, 178.09, 178.56, 178.99, 179.74, 180.62, 181.52, 182.39, 183.33, 184.25, 185.05, 185.84, 186.51, 187.16, 187.97, 188.87, 189.72, 190.71, 191.82, 192.93, 194.12, 195.29, 196.47, 197.74, 198.82, 200.03, 201.33, 202.56, 203.47, 204.32, 205.16, 205.99, 206.8, 207.5, 208.13, 208.73, 209.3, 209.88, 210.52, 211.06, 211.61, 211.98, 212.38, 212.78, 213.24, 213.76, 214.28, 214.87, 215.42, 216.03, 216.64, 217.27, 217.86, 218.53, 218.88, 219.16, 219.43, 219.74, 219.94, 220.25, 220.64, 220.95, 221.21, 221.48, 221.64, 221.78, 221.97, 222.1, 222.15, 222.17, 221.98, 221.77, 221.61, 221.53, 221.55, 221.48, 221.34, 221.18, 221.16, 221.23, 221.41, 221.46, 221.5, 221.65, 221.84, 221.92, 222.08, 222.29, 222.44, 222.63, 222.86, 223.35, 223.85, 224.3, 224.74, 225.14, 225.51, 225.7, 225.87, 226.01, 226.15, 226.31, 226.38, 226.37, 226.34, 226.24, 226.17, 226.06, 226.08, 226.03, 225.94, 225.97, 226.06, 226.19, 226.27, 226.42, 226.59, 226.72, 226.84, 226.99, 227.33, 227.7, 227.98, 228.16, 228.39, 228.72, 229.03, 229.37, 229.68, 230.07, 230.37, 230.78]

plt.figure(figsize=(12, 6))
plt.plot(dates, close_prices, label="AAPL Close Prices")
plt.plot(dates, custom_sma, label="Custom SMA")

plt.title("AAPL Close Prices vs Custom SMA")
plt.xlabel("Date")
plt.ylabel("Price")
plt.xticks(rotation=45)
plt.grid(True)
plt.legend()
plt.tight_layout()
plt.show()